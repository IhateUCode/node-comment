webpackJsonp([1],{"/Hv2":function(t,e){},"16uP":function(t,e){},"991W":function(t,e){},C6AZ:function(t,e){t.exports=function(t){var e=t.getFullYear(),n=t.getMonth()+1;n=n<10?"0"+n:n;var s=t.getDate();return e+"-"+n+"-"+(s=s<10?"0"+s:s)}},FEip:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("7+uW"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var a=n("VU/8")({name:"App"},o,!1,function(t){n("cx2U")},null,null).exports,i=n("/ocq"),r=n("aozt"),c=n.n(r),l=n("C6AZ"),u=n.n(l),p={data:function(){return{contentMessage:""}},props:["cookiename","list","count"],methods:{submitContent:function(){var t=this,e=this.count;c.a.post("/comment/add",{user:this.cookiename,content:this.contentMessage,time:u()(new Date),id:e++}).then(function(e){console.log(e),t.$emit("parent-change",{name:t.cookiename,content:t.contentMessage,time:u()(new Date)}),t.contentMessage=""}).catch(function(t){console.log(t)})}}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("p",{staticClass:"comment-title"},[t._v("发言区")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.contentMessage,expression:"contentMessage"}],staticClass:"comment-conntent",attrs:{name:"",id:"",cols:"30",rows:"10",placeholder:"请输入评论内容"},domProps:{value:t.contentMessage},on:{input:function(e){e.target.composing||(t.contentMessage=e.target.value)}}}),t._v(" "),n("button",{staticClass:"comment-submit",on:{click:t.submitContent}},[t._v("提 交")])])},staticRenderFns:[]};var g={data:function(){return{commentList:[],currentPage:1,pageSize:5,totalCount:0,yonghu:"",replycontent:"",getContent:"",showme:!1,getId:"",replyman:""}},components:{replyTextarea:n("VU/8")(p,m,!1,function(t){n("FEip")},"data-v-a98ceb92",null).exports},computed:{},methods:{getList:function(){var t=this;c.a.get("/comment",{params:{page:this.currentPage,pageSize:this.pageSize}}).then(function(e){t.commentList=e.data}).catch(function(t){console.log(t)})},getTotal:function(){var t=this;c.a.get("/comment").then(function(e){t.totalCount=e.data.length})},handleCurrentChange:function(t){this.currentPage=t,this.getList()},getYonghu:function(){var t=document.cookie.split("; ").filter(function(t){return-1!=t.indexOf("username")});console.log(document.cookie),this.yonghu=t[0].substring(9)||""},change:function(t){this.commentList.length>=5?(this.commentList.pop(),this.commentList.unshift(t)):this.commentList.unshift(t),this.getTotal()},popReplyBox:function(t){this.getId=t.id,this.showme=!0,this.replyman=t.name},popReplyBox2:function(t,e){this.getId=t.id,this.showme=!0,this.replyman=e.name},replyComment:function(){var t=this;c.a.post("/comment/reply",{name:this.yonghu,content:this.replycontent,time:u()(new Date),id:this.getId,replyman:this.replyman}).then(function(e){console.log(e),t.getList()}).catch(function(t){console.log(t)}),this.showme=!1},ddd:function(){console.log("ok")},loginOut:function(){var t=this;c.a.get("/comment/loginout").then(function(e){t.$message({message:e.data.result,type:"success"}),t.$router.push("/login")}).catch(function(t){console.log(t)})}},mounted:function(){this.getTotal(),this.getList(),this.getYonghu()}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("p",{staticClass:"big-title"},[t._v("COMMENT AREA")]),t._v(" "),n("p",{staticClass:"welcome"},[t._v("欢迎您~"+t._s(t.yonghu))]),t._v(" "),n("span",{staticClass:"login-out",on:{click:t.loginOut}},[t._v("退出登录")]),t._v(" "),n("p",{staticClass:"comment-title"},[t._v("评论区")]),t._v(" "),t._l(t.commentList,function(e,s){return n("div",{key:s,staticClass:"comment-list"},[n("div",{staticClass:"name-time"},[n("p",{staticClass:"name"},[t._v(t._s(e.name))]),t._v(" "),n("p",{staticClass:"time"},[t._v(t._s(e.time))]),t._v(" "),n("p",{staticClass:"reply",on:{click:function(n){t.popReplyBox(e)}}},[t._v("回复")])]),t._v(" "),n("p",{staticClass:"content"},[t._v(t._s(e.content))]),t._v(" "),t._l(e.replyArr,function(s,o){return n("div",{key:o,staticClass:"comment-list op"},[n("div",{staticClass:"name-time"},[n("p",{staticClass:"name"},[t._v(t._s(s.name===t.yonghu?"你":s.name)+" 回复 "+t._s(s.replyman===t.yonghu?"你":s.replyman))]),t._v(" "),n("p",{staticClass:"time"},[t._v(t._s(s.time))]),t._v(" "),n("p",{staticClass:"reply",on:{click:function(n){t.popReplyBox2(e,s)}}},[t._v("回复")])]),t._v(" "),n("p",{staticClass:"content"},[t._v(t._s(s.content))])])})],2)}),t._v(" "),n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.totalCount,"page-size":t.pageSize,"current-page":t.currentPage},on:{"current-change":t.handleCurrentChange}}),t._v(" "),n("replyTextarea",{attrs:{count:t.totalCount,cookiename:t.yonghu,list:t.commentList},on:{"parent-change":t.change}}),t._v(" "),t.showme?n("div",{staticClass:"shade-box",on:{click:function(e){t.showme=!1}}},[n("div",{staticClass:"pop-box"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.replycontent,expression:"replycontent"}],staticClass:"reply-input",attrs:{name:"",id:"",cols:"30",rows:"10",placeholder:"回复内容"},domProps:{value:t.replycontent},on:{click:function(e){return e.stopPropagation(),t.ddd(e)},input:function(e){e.target.composing||(t.replycontent=e.target.value)}}}),t._v(" "),n("button",{staticClass:"reply-btn",on:{click:t.replyComment}},[t._v("提 交")])])]):t._e()],2)},staticRenderFns:[]};var h=n("VU/8")(g,d,!1,function(t){n("hnKi")},"data-v-5f747cf6",null).exports,v={render:function(){var t=this.$createElement;return(this._self._c||t)("p",{on:{click:this.gotoComment}},[this._v("前往登录中心")])},staticRenderFns:[]};var f=n("VU/8")({data:function(){return{}},methods:{gotoComment:function(){this.$router.push("/login")}}},v,!1,function(t){n("T56M")},"data-v-1421ee1d",null).exports,_={data:function(){return{user:"",pwd:""}},methods:{open:function(){var t=this;""===this.user?this.$message({message:"请输入用户名",type:"warning"}):""===this.pwd?this.$message({message:"请输入密码",type:"warning"}):c.a.post("/user",{username:this.user,password:this.pwd}).then(function(e){console.log(e.data),1===e.data.status?(t.$message({message:"登录成功",type:"success"}),t.$router.push("/comments")):t.$message({message:e.data.result,type:"warning"})})}}},y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-box"},[n("p",{staticClass:"login-p"},[t._v("欢迎登录")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.user,expression:"user"}],staticClass:"login-input",attrs:{type:"text",placeholder:"请输入用户名"},domProps:{value:t.user},on:{input:function(e){e.target.composing||(t.user=e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.pwd,expression:"pwd"}],staticClass:"login-input",attrs:{type:"text",placeholder:"请输入密码"},domProps:{value:t.pwd},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.open(e):null},input:function(e){e.target.composing||(t.pwd=e.target.value)}}}),t._v(" "),n("button",{staticClass:"login-btn",on:{click:t.open}},[t._v("登 录")]),t._v(" "),n("router-link",{staticClass:"register-tips",attrs:{to:"/register"}},[t._v("没账号？去注册啊")])],1)},staticRenderFns:[]};var C=n("VU/8")(_,y,!1,function(t){n("ms7p")},"data-v-245b24c0",null).exports,w={data:function(){return{firstname:"",firstpwd:""}},methods:{registerBtn:function(){var t=this;""!=this.firstname&&""!=this.firstpwd?c.a.post("/user/register",{register_name:this.firstname,register_pwd:this.firstpwd}).then(function(e){t.$message({message:e.data.result,type:"success"}),t.$router.push("/login")}).catch(function(t){console.log(t)}):this.$message({message:"注册失败，账号或密码不能为空!",type:"warning"})}}},x={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-box"},[n("p",{staticClass:"login-p"},[t._v("欢迎注册")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.firstname,expression:"firstname"}],staticClass:"login-input",attrs:{type:"text",placeholder:"请输入用户名"},domProps:{value:t.firstname},on:{input:function(e){e.target.composing||(t.firstname=e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.firstpwd,expression:"firstpwd"}],staticClass:"login-input",attrs:{type:"text",placeholder:"请输入密码"},domProps:{value:t.firstpwd},on:{input:function(e){e.target.composing||(t.firstpwd=e.target.value)}}}),t._v(" "),n("button",{staticClass:"login-btn",on:{click:t.registerBtn}},[t._v("注 册")])])},staticRenderFns:[]};var k=n("VU/8")(w,x,!1,function(t){n("16uP")},"data-v-0dba53b5",null).exports;s.default.use(i.a);var b=new i.a({mode:"history",routes:[{path:"/comments",name:"comments",component:h},{path:"*",redirect:"/"},{path:"/",name:"index",component:f},{path:"/login",name:"login",component:C},{path:"/register",name:"register",component:k}]}),$=n("t+b9"),M=n.n($);n("/Hv2"),n("991W");s.default.use(M.a),s.default.config.productionTip=!1,b.beforeEach(function(t,e,n){var s=document.cookie.split("; ").filter(function(t){return-1!=t.indexOf("username")});"/login"===t.path?(s&&s.length>0&&n("/comments"),n()):"/register"===t.path?n():s&&s.length>0?n():n("/login")}),new s.default({el:"#app",router:b,components:{App:a},template:"<App/>"})},T56M:function(t,e){},cx2U:function(t,e){},hnKi:function(t,e){},ms7p:function(t,e){}},["NHnr"]);